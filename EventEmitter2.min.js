!function(b,c){b.EventEmitter2=a;function a(d){if(d){if(d.delimiter==="*"){throw new Error('The event can not be delimited by the "*" (wild-card) character.')}}this._delimiter=d?d.delimiter:".";this._maxListeners=d?d.maxListeners:10;this._events={}}a.prototype.addListener=function(h,j){var e,g=this._events;this.emit("newListener",h,j);if(~h.indexOf(this._delimiter)){e=h.split(this._delimiter);for(var f=0,d=e.length;f<d;f++){g=g[e[f]]||(g[e[f]]={})}}else{g=g[h]||(g[h]={})}if(g._listeners&&g._listeners.length===this.maxListeners){this.emit("maxListeners",h);return}g._listeners?g._listeners.push(j):g._listeners=[j]};a.prototype.on=a.prototype.addListener;a.prototype.once=function(d,e){this.many(d,e,1)};a.prototype.many=function(f,g,d){var e=this;this.addListener(f,function(){if(d--==0){e.removeListener(f,g)}else{g.apply(null,arguments)}})};a.prototype.emit=function(d){var t=this;function m(u){for(var j=0,i=u._listeners.length;j<i;j++){u._listeners[j].apply(this,o)}return true}var o=arguments,k=0,h=0;if(~d.indexOf(this._delimiter)){name=d.split(this._delimiter);var r=[this._events],g=false,s=null;for(k=0;k<name.length;k++){var f=name[k],e=[],n=[];for(h=0;h<r.length;h++){var q=r[h];if(k===name.length-1){if(f==="*"){for(s in q){if(q[s]&&q[s]._listeners){m(q[s])}}g=true}else{if(q[f]&&q[f]._listeners&&m(q[f])){g=true}if(q["*"]&&q["*"]._listeners&&m(q["*"])){g=true}}}else{if(f!=="*"){if(!q[f]&&!q["*"]){continue}if(q[f]){if(q["*"]){e.push(q["*"])}r[h]=r[h][f]}else{if(q["*"]){r[h]=r[h]["*"];if(q["*"]&&q["*"]._listeners&&m(q["*"])){g=true}}}}else{for(s in q){if(q.hasOwnProperty(s)){e.push(q[s])}}if(q["*"]&&q["*"]._listeners&&m(q["*"])){g=true}n.push(h)}}}for(h=0;h<n.length;h++){r.splice(h,1)}if(e.length){r=r.concat(e)}}return g}else{if(this._events[d]&&this._events[d]._listeners){var p=this._events[d]._listeners;for(k=0,l=p.length;k<l;k++){p[k].apply(this,o)}}}return true};a.prototype.removeListener=function(d){this._events[d]={}};a.prototype.removeAllListeners=function(){this._events={}};a.prototype.setMaxListeners=function(d){this.maxListeners=d};a.prototype.listeners=function(d){if(this._events[d]){return this._events[d]._listeners}else{return false}}}(typeof exports==="undefined"?window:exports);
